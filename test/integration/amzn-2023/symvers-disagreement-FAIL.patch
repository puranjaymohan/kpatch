From eec601f20b35153d051f2a873a194aa2a7ac3bc6 Mon Sep 17 00:00:00 2001
From: Puranjay Mohan <pjy@amazon.com>
Date: Fri, 7 Feb 2025 12:40:18 +0000
Subject: [PATCH] disagreement

Signed-off-by: Puranjay Mohan <pjy@amazon.com>
---
 drivers/base/core.c    | 2 ++
 drivers/usb/core/usb.c | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/drivers/base/core.c b/drivers/base/core.c
index d922cefc1e66..f143d56d239d 100644
--- a/drivers/base/core.c
+++ b/drivers/base/core.c
@@ -37,6 +37,8 @@
 #include "physical_location.h"
 #include "power/power.h"
 
+#include <linux/blktrace_api.h>
+
 /* Device links support. */
 static LIST_HEAD(deferred_sync);
 static unsigned int defer_sync_state_count = 1;
diff --git a/drivers/usb/core/usb.c b/drivers/usb/core/usb.c
index 0b4685aad2d5..d326f2c610be 100644
--- a/drivers/usb/core/usb.c
+++ b/drivers/usb/core/usb.c
@@ -761,6 +761,8 @@ EXPORT_SYMBOL_GPL(usb_alloc_dev);
  */
 struct usb_device *usb_get_dev(struct usb_device *dev)
 {
+	barrier();
+
 	if (dev)
 		get_device(&dev->dev);
 	return dev;
-- 
2.47.1

